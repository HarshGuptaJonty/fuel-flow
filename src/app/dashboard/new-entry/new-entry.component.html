<div class="new-entry-container">
    <div class="heading bold-text">Add New Entry</div>
    <div>Please provide the following details.</div>

    <form [formGroup]="entryForm" class="customer-form">
        <div class="gap d-flex w-100 flex-wrap">
            <div class="pt-2 box-input">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Date</mat-label>
                    <input matInput [matDatepicker]="picker" #dateInput formControlName="date"
                        (focus)="onfocus('date')">
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </div>
            <div class="pt-2 box-input">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Units Sent</mat-label>
                    <input matInput placeholder="5" [maxLength]="3" autocomplete="off" formControlName="unitsSent"
                        (focus)="onfocus('unitsSent')">
                </mat-form-field>
            </div>
            <div class="pt-2 box-input">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Units Recieved</mat-label>
                    <input matInput placeholder="5" [maxLength]="3" autocomplete="off" formControlName="unitsRecieved"
                        (focus)="onfocus('unitsRecieved')">
                </mat-form-field>
            </div>
            <div class="pt-2 box-input">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Rate/Unit</mat-label>
                    <input matInput placeholder="1400" [maxLength]="10" autocomplete="off" formControlName="rate"
                        (focus)="onfocus('rate')">
                </mat-form-field>
            </div>
            <div class="pt-2 box-input">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Paid Amount</mat-label>
                    <input matInput placeholder="1400" [maxLength]="10" autocomplete="off" formControlName="paidAmt"
                        (focus)="onfocus('paidAmt')">
                </mat-form-field>
            </div>
        </div>
        <div class="mt-3 bold-text nowrap">Please provide the delivery boy details.</div>
        <div class="gap d-flex w-100 flex-wrap">
            <div class="pt-2 box-input-half p-relative">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Full Name</mat-label>
                    <input matInput placeholder="Ankit" [maxLength]="30" autocomplete="off"
                        formControlName="deliveryBoyName" (focus)="onfocus('deliveryBoyName')">
                </mat-form-field>
                <div class="select-dropdown"
                    *ngIf="deliveryBoysSearchList.length > 0 && focusedFormName === 'deliveryBoyName'">
                    <div class="profile" *ngFor="let obj of deliveryBoysSearchList" (click)="onSelectDeliveryBoy(obj)">
                        <span class="bold-text me-2">{{obj.data.fullName}}</span>
                        <span *ngIf="obj.data?.phoneNumber"
                            class="dropdown-number">{{formatNumber(obj.data.phoneNumber)}}</span>
                    </div>
                </div>
            </div>
            <div class="pt-2 box-input-half p-relative">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Phone Number</mat-label>
                    <input matInput placeholder="xxxx xxx xxx" prefix="+91 " [maxLength]="16" autocomplete="off"
                        mask="0000 000 000" formControlName="deliveryBoyNumber" (focus)="onfocus('deliveryBoyNumber')">
                </mat-form-field>
                <div class="select-dropdown"
                    *ngIf="deliveryBoysSearchList.length > 0 && focusedFormName === 'deliveryBoyNumber'">
                    <div class="profile" *ngFor="let obj of deliveryBoysSearchList" (click)="onSelectDeliveryBoy(obj)">
                        <span class="bold-text me-2">{{obj.data.fullName}}</span>
                        <span *ngIf="obj.data?.phoneNumber"
                            class="dropdown-number">{{formatNumber(obj.data.phoneNumber)}}</span>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="!deliveryBoySelected && this.entryForm.get('deliveryBoyName')?.value"
            class="small-text error-msg bold-text mt-1">New
            delivery person ({{this.entryForm.get('deliveryBoyName')?.value}}) will be created!</div>
        <div class="pt-2 mt-1">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Delivery person address</mat-label>
                <input matInput placeholder="ABC Lane, XYZ Road 132002" autocomplete="off"
                    formControlName="deliveryBoyAddress" (focus)="onfocus('deliveryBoyAddress')">
            </mat-form-field>
        </div>
        <div class="pt-2 mt-1">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Extra details</mat-label>
                <input matInput placeholder="Payment might be delayed..." autocomplete="off"
                    formControlName="extraDetails" (focus)="onfocus('extraDetails')">
            </mat-form-field>
        </div>
    </form>
    <div class="error-msg mt-2 bold-text" *ngIf="errorMessage">{{errorMessage}}</div>
    <div class="mt-3 justify-content-between d-flex button-section">
        <button mat-flat-button (click)="onSaveClick()" class="custom-btn" [disabled]="disableSave">Save Entry
            Details</button>
        <div>
            <button mat-flat-button (click)="onDeleteClick()" *ngIf="isEditing"
                class="custom-btn cancel-btn me-3">Delete</button>
            <button mat-flat-button (click)="onCancelClick()" class="custom-btn cancel-btn">Cancel</button>
        </div>
    </div>
</div>